<!DOCTYPE html>
<html>
  <head>
    <title>Terrain Generator</title>
  </head>

<body>
<style>
  canvas {
    display: block;
    width: 100vw;
    height: 100vh;
    border: 0px !important;
  }
</style>
<canvas id="c"></canvas>
<script type="text/javascript" src="lib/dat.gui.min.js"></script>
<script type="text/javascript" src="lib/data.js"></script>
<script type="text/javascript" src="lib/util.js"></script>

   <script id="3d-vertex-shader" type="notjs">
    // an attribute will receive data from a buffer
    attribute vec4 a_position;
    attribute vec3 a_normal;

    uniform mat4 u_worldViewProjection;
    uniform mat4 u_world;

    varying vec3 v_normal;
    varying float v_height;

    void main(){

    v_normal = mat3(u_world) * a_normal;
    v_height = a_position.y;

        gl_Position = u_worldViewProjection * a_position;

    }
  </script>

  <script id="3d-fragment-shader" type="notjs">
    // fragment shaders don't have a default precision so we need
    // to pick one. mediump is a good default

    precision mediump float;
    uniform vec3 u_light;

    varying vec3 v_normal;
    varying float v_height;

    void main() {

    vec3 purple = vec3(0.7,0,0.7);
    vec3 red = vec3(0.8,0.5,0);

        vec3 color = vec3(0,0,0);
        vec3 material_color = mix(purple,red,v_height/400.);
        vec3 light_color = vec3(.7,.7,.7);

        vec3 normal = normalize(v_normal);

        float diffuse = dot(normal, u_light);

        color = material_color + light_color*diffuse;
    
        gl_FragColor = vec4(color,1.0);
    }
  </script>
  <script src="index.js"></script>

</body>
  
</html>
